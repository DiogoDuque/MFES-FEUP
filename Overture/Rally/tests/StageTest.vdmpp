class StageTest is subclass of MyTestCase

instance variables
	stage1: Stage := new Stage(<Timed>, DateUtils`MakeDate(2017, 12, 1), 10);
	stage2: Stage := new Stage(<Special>, DateUtils`MakeDate(2017, 12, 2), 50);
	stage3: Stage := new Stage(<Timed>, DateUtils`MakeDate(2017, 12, 3), 3);
	stage4: Stage := new Stage(<Transport>, DateUtils`MakeDate(2017, 12, 5), 100);
	
	team0: Team := new Team("Test Team", <Germany>);
	driver1: Driver := new Driver("Anne", <Female>, <Germany>, DateUtils`MakeDate(1990, 8, 7));
	driver2: Driver := new Driver("Anna", <Female>, <Germany>, DateUtils`MakeDate(1990, 8, 7));
	driver3: Driver := new Driver("Annie", <Female>, <Germany>, DateUtils`MakeDate(1990, 8, 7));
	
	performance1: Performance := new Performance(driver1);
	performance2: Performance := new Performance(driver2);
	performance3: Performance := new Performance(driver3);

operations
	public Run: () ==> ()
	Run() == (
		IO`println("\nStage Tests");
		
		--Setup
		driver1.SetTeam(team0);
		driver2.SetTeam(team0);
		driver3.SetTeam(team0);
		
		performance1.SetTime(200);
		performance1.SetAverageSpeed(50);
		
		performance2.SetTime(217);
		performance2.SetAverageSpeed(48);
		performance2.SetPenalty(1);
		
		performance3.SetTime(202);
		performance3.SetAverageSpeed(50);
		
		stage3.AddPerformance(performance1);
		stage3.AddPerformance(performance2);
		stage3.AddPerformance(performance3);
		
		--Type
		assertEqual(<Timed>, stage1.GetType());
		assertEqual(<Special>, stage2.GetType());
		
		--Date
		assertEqual(DateUtils`MakeDate(2017, 12, 3), stage3.GetDate());
		assertEqual(DateUtils`MakeDate(2017, 12, 5), stage4.GetDate());
		
		--Distance
		assertEqual(10, stage1.GetDistance());
		assertEqual(100, stage4.GetDistance());
		
		--Driver Performance
		assertEqual(performance1, stage3.GetDriverPerformance(driver1));
		assertEqual(performance3, stage3.GetDriverPerformance(driver3));
		
		--Performances
		assertEqual([performance1, performance3, performance2], stage3.GetPerformances());
			
		IO`println("\nFinalizing Stage Tests");
	);


end StageTest